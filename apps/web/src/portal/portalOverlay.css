.portalOverlay{
  position: fixed;
  inset: 0;
  z-index: 9999;
  pointer-events: none;
  will-change: clip-path, opacity, background;
  transform: translateZ(0);
  isolation: isolate;
}

.portalOverlay::before{
  content: "";
  position: absolute;
  inset: 0;
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,0.04) 0px,
      rgba(255,255,255,0.04) 1px,
      rgba(0,0,0,0) 3px,
      rgba(0,0,0,0) 6px
    ),
    radial-gradient(circle at 50% 50%, rgba(255,255,255,0.06), rgba(0,0,0,0) 55%);
  mix-blend-mode: overlay;
  opacity: 0.35;
}

.portalOverlay::after{
  content: "";
  position: absolute;
  inset: -10%;
  background:
    radial-gradient(circle at var(--ox, 50%) var(--oy, 50%),
      transparent 0%,
      transparent 56%,
      rgb(var(--core, 120 190 255) / 0.42) 60%,
      transparent 64%,
      transparent 100%
    );
  filter: drop-shadow(0 0 18px rgb(var(--core, 120 190 255) / 0.18));
  opacity: 0.9;
}

.portalOverlay[data-phase="focusPreview"]::after{
  opacity: 1;
}

.portalOverlay[data-phase="portalFade"]::after{
  opacity: 0.6;
}

@media (prefers-reduced-motion: reduce){
  .portalOverlay::before,
  .portalOverlay::after{
    opacity: 0.22;
  }
}

.portalOverlay{
  animation: portalFlicker 1.9s infinite;
}

@keyframes portalFlicker{
  0%{ filter: saturate(1.15) brightness(1.02); }
  50%{ filter: saturate(1.08) brightness(0.99); }
  100%{ filter: saturate(1.13) brightness(1.01); }
}

@media (prefers-reduced-motion: reduce){
  .portalOverlay{
    animation: none;
    filter: none;
  }
}
