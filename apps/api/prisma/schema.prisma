generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  ADMIN
  EDITOR
}

enum PublishStatus {
  DRAFT
  PUBLISHED
}

enum MediaType {
  IMAGE
  VIDEO
}

model User {
  id           String   @id @default(cuid())
  username     String   @unique
  passwordHash String
  role         Role     @default(ADMIN)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  sessions     Session[]
}

model Session {
  id        String   @id
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  expiresAt DateTime
  createdAt DateTime @default(now())

  @@index([userId])
  @@index([expiresAt])
}

model Project {
  id          String        @id @default(cuid())
  title       String
  slug        String        @unique
  summary     String?
  body        String?
  coverUrl    String?
  status      PublishStatus @default(DRAFT)
  publishedAt DateTime?
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
}

model News {
  id          String        @id @default(cuid())
  title       String
  slug        String        @unique
  excerpt     String?
  body        String?
  coverUrl    String?
  status      PublishStatus @default(DRAFT)
  publishedAt DateTime?
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
}

model MediaItem {
  id          String        @id @default(cuid())
  title       String
  type        MediaType     @default(IMAGE)
  url         String
  thumbnailUrl String?
  status      PublishStatus @default(DRAFT)
  publishedAt DateTime?
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
}

model GalleryItem {
  id          String        @id @default(cuid())
  title       String
  imageUrl    String
  status      PublishStatus @default(DRAFT)
  publishedAt DateTime?
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
}

model TeamMember {
  id          String        @id @default(cuid())
  name        String
  title       String?
  bio         String?
  avatarUrl   String?
  status      PublishStatus @default(DRAFT)
  publishedAt DateTime?
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
}

model DocPage {
  id          String        @id @default(cuid())
  title       String
  slug        String        @unique
  markdown    String?
  status      PublishStatus @default(DRAFT)
  publishedAt DateTime?
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
}

model Game {
  id          String        @id @default(cuid())
  title       String
  slug        String        @unique
  description String?
  coverUrl    String?
  storeUrl    String?
  status      PublishStatus @default(DRAFT)
  publishedAt DateTime?
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
}
